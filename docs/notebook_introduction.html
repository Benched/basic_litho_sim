<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="./favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" href="./assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" href="./assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" href="./assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" href="./assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
    <link rel="manifest" href="./manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        resizeObserver.observe(obj.contentWindow.document.body);
      }
    </script>
    <marimo-filename hidden>notebook.py</marimo-filename>
    <marimo-mode data-mode='read' hidden></marimo-mode>
    <marimo-version data-version='0.13.11' hidden></marimo-version>
    <marimo-user-config data-config='{"completion": {"activate_on_typing": true, "copilot": false}, "display": {"code_editor_font_size": 14, "default_table_page_size": 10, "dataframes": "rich", "default_width": "medium", "theme": "light", "cell_output": "above"}, "formatting": {"line_length": 79}, "keymap": {"preset": "default", "overrides": {}}, "runtime": {"auto_instantiate": true, "auto_reload": "off", "reactive_tests": true, "on_cell_change": "autorun", "watcher_on_save": "lazy", "output_max_bytes": 8000000, "std_stream_max_bytes": 1000000, "default_sql_output": "auto"}, "save": {"autosave": "off", "autosave_delay": 1000, "format_on_save": false}, "package_management": {"manager": "pip"}, "server": {"browser": "default", "follow_symlink": false}, "language_servers": {"pylsp": {"enabled": true, "enable_mypy": true, "enable_ruff": true, "enable_flake8": false, "enable_pydocstyle": false, "enable_pylint": false, "enable_pyflakes": false}}, "snippets": {"custom_paths": [], "include_default_snippets": true}}' data-overrides='{}' hidden></marimo-user-config>
    <marimo-app-config data-config='{"width": "medium", "sql_output": "auto"}' hidden></marimo-app-config>
    <marimo-server-token data-token='123' hidden></marimo-server-token>
    <title>notebook introduction</title>
    <script type="module" crossorigin src="./assets/index-BR3wLmMq.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-CQvPIadz.css">
  <marimo-wasm hidden=""></marimo-wasm>
    <script>
        if (window.location.protocol === 'file:') {
            alert('Warning: This file must be served by an HTTP server to function correctly.');
        }
    </script>
    
    <style>
        #save-button {
            display: none !important;
        }
        #filename-input {
            display: none !important;
        }
    </style>
    <marimo-code hidden="" data-show-code="false">import%20marimo%0A%0A__generated_with%20%3D%20%220.13.11%22%0Aapp%20%3D%20marimo.App(width%3D%22medium%22)%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20import%20matplotlib.pyplot%20as%20plt%0A%20%20%20%20import%20matplotlib.patches%20as%20patches%0A%20%20%20%20return%20mo%2C%20patches%2C%20plt%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%20Chip%20producton%20process%0A%0A%20%20%20%20%23%23%23%20The%20purpose%20of%20these%20pages%0A%20%20%20%20These%20notebooks%20are%20designed%20to%20help%20you%20get%20familiar%20with%20the%20basics%20of%20how%20computer%20chips%20are%20made%2C%20with%20a%20special%20focus%20on%20the%20optics%20involved%20in%20that%20process.%0A%0A%20%20%20%20We%E2%80%99ll%20use%20visualizations%2C%20and%20interactive%20simulations%20where%20you%20can%20turn%20the%20knobs%20yourself%20to%20see%20how%20light%20is%20used%20to%20build%20the%20technology%20inside%20our%20phones%2C%20cars%2C%20and%20computers.%0A%0A%20%20%20%20%23%23%23%20Where%20to%20find%20what%3F%0A%0A%20%20%20%20This%20first%20notebook%20gives%20a%20big-picture%20introduction%3A%0A%0A%20%20%20%20-%20What%20a%20chip%20is%0A%20%20%20%20-%20The%20main%20steps%20in%20how%20chips%20are%20fabricated%0A%20%20%20%20-%20Why%20optics%20is%20absolutely%20central%20to%20making%20them%0A%0A%20%20%20%20After%20that%2C%20the%20following%20notebooks%20will%20zoom%20in%20on%20the%20optics%3A%20what%20are%20the%20challanges%20in%20using%20light%20to%20etch%20patterns%20smaller%20than%20bacteria%20onto%20silicon%2C%20and%20why%20some%20of%20the%20machines%20that%20do%20this%20cost%20hundreds%20of%20billions%20of%20euros.%0A%0A%20%20%20%20If%20you%E2%80%99re%20mainly%20here%20for%20the%20optics%2C%20you%20can%20skip%20ahead%20past%20the%20fabrication%20overview%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0Aapp._unparsable_cell(%0A%20%20%20%20r%22%22%22%0A%20%20%20%20%23%23%23%20plan%20for%20this%20notebook%0A%20%20%20%201.%20Chips%20in%20daily%20life.%0A%20%20%20%202.%20What%20does%20a%20chip%20do%3F%0A%20%20%20%20%20%20%20%20-%20logic%20%0A%20%20%20%20%20%20%20%20-%20Binary%2C%20math%2C%20logical%20operations%0A%20%20%20%20%20%20%20%20-%20Memory%0A%20%20%20%203.%20How%20does%20that%20work%3F%0A%20%20%20%20%20%20%20%20-%20memory%0A%20%20%20%20%20%20%20%20-%20and%2C%20or%2C%20addition%0A%20%20%20%20%20%20%20%20-%20transistor%0A%20%20%20%20%20%20%20%20-%20silicon%20%2F%20semiconductor%0A%20%20%20%204.%20Who%20makes%20them%3F%0A%20%20%20%20%20%20%20%20-%20Chip%20design%0A%20%20%20%20%20%20%20%20-%20Chip%20fabrication%0A%20%20%20%205.%20What%20are%20the%20main%20steps%0A%20%20%20%20%20%20%20%20-%20Litho%3A%20Coat%2C%20bake%2C%20exposure%2C%20develop%0A%20%20%20%20%20%20%20%20-%20Etch%2C%20Deposit%2C%20implant%2C%20grind%0A%20%20%20%20%20%20%20%20-%20repeat%20many%20times.%0A%20%20%20%20%20%20%20%20-%20package%0A%20%20%20%206.%20So%20optics...%0A%20%20%20%20%20%20%20%20-%20Key%20role%20in%20mass%20production%20of%20small%20patterns%0A%20%20%20%20%20%20%20%20-%20Rayleigh%20criterion%0A%20%20%20%20%20%20%20%20-%20Aberrations%0A%0A%0A%0A%20%20%20%20%22%22%22%2C%0A%20%20%20%20name%3D%22_%22%0A)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%20What%20Does%20a%20Chip%20Do%3F%0A%0A%20%20%20%20Chips%20are%20everywhere%20in%20modern%20life.%20Mobile%20phones%20and%20laptops%20are%20the%20obvious%20examples%2C%20but%20even%20everyday%20objects%20like%20washing%20machines%2C%20cameras%2C%20and%20cars%20depend%20on%20them.%0A%20%20%20%20After%20the%20COVID-19%20pandemic%2C%20for%20instance%2C%20a%20global%20chip%20shortage%20made%20headlines%20because%20car%20production%20stalled.%20That%E2%80%99s%20no%20surprise%20when%20you%20realize%20that%20a%20typical%20car%20today%20contains%20more%20than%20a%20thousand%20chips%20%E2%80%94%20controlling%20everything%20from%20unlocking%20doors%20and%20measuring%20tire%20pressure%20to%20adjusting%20headlights%20and%20running%20the%20infotainment%20system.%0A%0A%20%20%20%20So%20what%20do%20all%20these%20chips%20actually%20do%3F%0A%20%20%20%20At%20their%20core%2C%20chips%20handle%20three%20kinds%20of%20tasks%3A%0A%0A%20%20%20%20*%20Storing%20data%0A%20%20%20%20*%20Processing%20information%20%E2%80%94%20such%20as%20performing%20calculations%20and%20logical%20decisions.%0A%20%20%20%20*%20Coordinating%20operations%20%E2%80%94%20controlling%20how%20data%20moves%20and%20when%20things%20happen.%0A%0A%20%20%20%20Every%20modern%20chip%2C%20no%20matter%20how%20complex%2C%20builds%20on%20these%20same%20ideas.%20Before%20looking%20at%20the%20fabrication%20process%20we%20will%20first%20look%20more%20closely%20at%20what%20the%20first%20two%20steps%20for%20a%20chip%20look%20like.%0A%0A%20%20%20%20%23%23%23%20The%20language%20and%20logic%20of%20chips%0A%20%20%20%20Most%20chips%20share%20a%20common%20internal%20language%3A%20binary%20%E2%80%94%20a%20language%20of%20zeros%20and%20ones.%0A%20%20%20%20Each%20%E2%80%9Cbit%E2%80%9D%20can%20be%20either%200%20(off)%20or%201%20(on).%20With%20only%20two%20symbols%2C%20binary%20can%20represent%20anything%3A%20numbers%2C%20letters%2C%20colors%2C%20even%20videos.%20In%20the%20upcomming%20sections%20we%20briefly%20look%20into%20binary%20as%20wel%20as%20the%20operations%20we%20can%20do%20with%20it%20that%20correspond%20to%20real-world%20tasks.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20binary_a%20%3D%20bin(ord('a'))%5B2%3A%5D%3B%20%0A%20%20%20%20binary_a%20%3D%20'0'*(8-len(binary_a))%20%2B%20binary_a%0A%20%20%20%20return%20(binary_a%2C)%0A%0A%0A%40app.cell%0Adef%20_(binary_a%2C%20mo)%3A%0A%20%20%20%20mo.md(f%22%22%22%0A%20%20%20%20One%20example%20of%20using%20binary%20is%20the%20letter%20'a'%20as%20used%20in%20a%20notebook%20like%20this%20one.%20In%20binary%20it%20is%20represented%20as%3A%20%7Bbinary_a%7D%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20Counting%20in%20binary%20follows%20a%20simple%20pattern%3A%0A%0A%20%20%20%20%7C%20Decimal%20%7C%09Binary%20%7C%20power%20of%20two%20%7C%0A%20%20%20%20%7C%3A---%7C%3A---%3A%7C---%3A%7C%0A%20%20%20%20%7C0%09%20%7C0%20%20%20%20%7C2%5E0%20%20%7C%0A%20%20%20%20%7C1%09%20%7C1%20%20%20%20%7C%20%20%20%20%20%7C%0A%20%20%20%20%7C2%09%20%7C10%20%20%20%7C2%5E1%20%20%7C%0A%20%20%20%20%7C3%09%20%7C11%20%20%20%7C%20%20%20%20%20%7C%0A%20%20%20%20%7C4%09%20%7C100%20%20%7C2%5E2%20%20%7C%0A%20%20%20%20%7C5%09%20%7C101%20%20%7C%20%20%20%20%20%7C%0A%20%20%20%20%7C6%09%20%7C110%20%20%7C%20%20%20%20%20%7C%0A%20%20%20%20%7C7%09%20%7C111%20%20%7C%20%20%20%20%20%7C%0A%20%20%20%20%7C8%20%20%20%7C1000%20%7C2%5E3%20%20%7C%0A%0A%20%20%20%20Just%20as%20our%20familiar%20decimal%20system%20(base%2010)%20counts%20in%20powers%20of%20ten%2C%20binary%20(base%202)%20counts%20in%20powers%20of%20two.%0A%0A%20%20%20%20For%20example%2C%20in%20decimal%0A%20%20%20%20%24%24111%20%3D%201%20%5Ccdot%2010%5E2%20%2B%201%20%5Ccdot%2010%5E1%20%2B%201%20%5Ccdot%2010%5E0%20%3D%20111%24%24%0A%20%20%20%20while%20in%20111%20in%20binary%20becomes%3A%0A%20%20%20%20%24%24111%20%3D%201%20%5Ccdot%202%5E2%20%2B%201%20%5Ccdot%202%5E1%20%2B%201%20%5Ccdot%202%5E0%20%3D%207%24%24%0A%0A%20%20%20%20Inside%20a%20chip%2C%20these%200s%20and%201s%20are%20represented%20by%20tiny%20electrical%20charges%20and%20signals%20%E2%80%94%20millions%20or%20billions%20of%20microscopic%20switches%20flipping%20on%20and%20off.%0A%20%20%20%20By%20combining%20many%20of%20these%20switches%2C%20we%20can%20build%20circuits%20that%20add%20numbers%2C%20store%20information%2C%20and%20make%20decisions%20%E2%80%94%20everything%20that%20forms%20the%20foundation%20of%20modern%20computing.%0A%0A%20%20%20%20Below%20you%20can%20try%20it%20out%20and%20convert%20numbers%20to%20binary%20and%20vice%20versa.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20number_to_convert%20%3D%20mo.ui.number(start%3D0%2C%20value%3D42)%0A%20%20%20%20return%20(number_to_convert%2C)%0A%0A%0A%40app.cell%0Adef%20_(mo%2C%20number_to_convert)%3A%0A%20%20%20%20mo.hstack((%0A%20%20%20%20%20%20%20%20mo.md(%22*%20Convert%20a%20positive%20integer%20into%20binary%3A%20%22)%2C%0A%20%20%20%20%20%20%20%20number_to_convert%2C%0A%20%20%20%20%20%20%20%20mo.md(f%22equals%3A%20%7Bbin(number_to_convert.value)%5B2%3A%5D%7D%22))%2C%20justify%3D%22start%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20last_valid%2C%20set_valid%20%3D%20mo.state(%221010%22)%0A%20%20%20%20return%20last_valid%2C%20set_valid%0A%0A%0A%40app.cell%0Adef%20_(last_valid%2C%20mo%2C%20set_valid)%3A%0A%20%20%20%20def%20validate_binary(new_value)%3A%0A%20%20%20%20%20%20%20%20if%20all(ch%20in%20%2201%22%20for%20ch%20in%20new_value)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20set_valid(new_value)%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20set_valid(last_valid())%0A%0A%20%20%20%20def%20render_binary_input()%3A%0A%20%20%20%20%20%20%20%20return%20mo.ui.text(%0A%20%20%20%20%20%20%20%20%20%20%20%20label%3D%22*%20Convert%20binary%20input%20to%20an%20integer%3A%20%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3Dlast_valid()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20on_change%3Dvalidate_binary%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20binary_text_input%20%3D%20render_binary_input()%0A%20%20%20%20return%20binary_text_input%2C%20validate_binary%0A%0A%0A%40app.cell%0Adef%20_(binary_text_input%2C%20mo%2C%20validate_binary)%3A%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20binary_converted_to_integer%20%3D%20int(binary_text_input.value%2C%202)%0A%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20validate_binary(binary_text_input.value)%0A%0A%20%20%20%20mo.hstack(%5B%0A%20%20%20%20%20%20%20%20binary_text_input%2C%20mo.md(f%22equals%3A%20%7Bbinary_converted_to_integer%7D%22)%0A%20%20%20%20%5D%2C%20justify%3D%22start%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20Now%20that%20we%20have%20binary%20as%20a%20language%2C%20we%20still%20need%20to%20do%20something%20with%20it%20for%20a%20chip%20to%20be%20useful.%20It%20turns%20out%20we%20can%20reduce%20all%20the%20complex%20operations%20we%20want%20to%20perform%20to%20a%20couple%20of%20very%20simple%20ones%2C%20such%20as%20the%20AND%2C%20OR%20and%20XOR%20operations%3A%0A%0A%20%20%20%20-%20given%20two%20bits%20of%20input%20the%20AND%20operator%20gives%20an%20output%20that%20is%201%20if%20the%20first%20bit%20AND%20the%20second%20bit%20is%201%2C%20otherwise%20the%20outpur%20is%20zero.%0A%20%20%20%20-%20given%20two%20bits%20of%20input%20the%20OR%20operator%20gives%20an%20out%20that%20is%201%20is%20the%20first%20bit%20OR%20the%20second%20bit%20is%201%2C%20where%20both%20bits%20being%201%20also%20counts.%20However%2C%20if%20both%20bits%20are%200%20the%20output%20will%20be%200.%0A%20%20%20%20-%20Finally%20the%20XOR%20(eXclusive%20OR)%20gives%201%20as%20an%20output%20if%20the%20first%20bit%20is%201%20or%20the%20second%20bit%20is%201%2C%20but%20not%20both.%20A%20common%20table%20format%20for%20this%20is%3A%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20AND%20operator%0A%20%20%20%20%7C%20input%201%20%7C%20input%202%20%7C%20output%20%7C%0A%20%20%20%20%7C---%7C---%7C---%7C%0A%20%20%20%20%7C%200%20%7C%200%20%7C%200%20%7C%0A%20%20%20%20%7C%200%20%7C%201%20%7C%200%20%7C%0A%20%20%20%20%7C%201%20%7C%200%20%7C%200%20%7C%0A%20%20%20%20%7C%201%20%7C%201%20%7C%201%20%7C%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0Aapp._unparsable_cell(%0A%20%20%20%20r%22%22%22%0A%20%20%20%20%23%23%23%20OR%20operator%0A%20%20%20%20%7C%20input%201%20%7C%20input%202%20%7C%20output%20%7C%0A%20%20%20%20%7C---%7C---%7C---%7C%0A%20%20%20%20%7C%200%20%7C%200%20%7C%200%20%7C%0A%20%20%20%20%7C%200%20%7C%201%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%201%20%7C%201%20%7C%0A%20%20%20%20%22%22%22%2C%0A%20%20%20%20name%3D%22_%22%0A)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20XOR%20operator%0A%20%20%20%20%7C%20input%201%20%7C%20input%202%20%7C%20output%20%7C%0A%20%20%20%20%7C---%7C---%7C---%7C%0A%20%20%20%20%7C%200%20%7C%200%20%7C%200%20%7C%0A%20%20%20%20%7C%200%20%7C%201%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%201%20%7C%200%20%7C%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%0A%20%20%20%20%23%20---%20Inputs%20---%0A%20%20%20%20A%20%3D%20mo.ui.checkbox(label%3D%22Switch%20A%20(checked%20%3D%201%2C%20unchecked%20%3D%200)%22%2C%20value%3DFalse)%0A%20%20%20%20B%20%3D%20mo.ui.checkbox(label%3D%22Switch%20B%20(checked%20%3D%201%2C%20unchecked%20%3D%200)%22%2C%20value%3DFalse)%0A%0A%20%20%20%20operation%20%3D%20mo.ui.dropdown(%0A%20%20%20%20%20%20%20%20options%3D%5B%22AND%22%2C%20%22OR%22%2C%20%22XOR%22%5D%2C%0A%20%20%20%20%20%20%20%20value%3D%22AND%22%2C%0A%20%20%20%20%20%20%20%20label%3D%22Gate%20Type%22%0A%20%20%20%20)%0A%0A%20%20%20%20%23%20---%20Logic%20function%20---%0A%20%20%20%20def%20logic_output(a%3A%20bool%2C%20b%3A%20bool%2C%20op%3A%20str)%20-%3E%20bool%3A%0A%20%20%20%20%20%20%20%20if%20op%20%3D%3D%20%22AND%22%3A%20return%20a%20and%20b%0A%20%20%20%20%20%20%20%20if%20op%20%3D%3D%20%22OR%22%3A%20return%20a%20or%20b%0A%20%20%20%20%20%20%20%20if%20op%20%3D%3D%20%22XOR%22%3A%20return%20a%20%5E%20b%0A%20%20%20%20return%20A%2C%20B%2C%20logic_output%2C%20operation%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20Here%20is%20a%20visualization%20with%20two%20switches%20and%20the%20logical%20operator%20controlling%20the%20lightbulb.%20Switch%20closed%20means%20it%20is%20a%201%2C%20switch%20open%20means%20it%20is%20a%20zero%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(A%2C%20B%2C%20logic_output%2C%20mo%2C%20operation%2C%20patches%2C%20plt)%3A%0A%0A%20%20%20%20%23%20---%20Reactive%20diagram%20---%0A%20%20%20%20def%20logic_diagram()%3A%0A%20%20%20%20%20%20%20%20a%2C%20b%2C%20op%20%3D%20A.value%2C%20B.value%2C%20operation.value%0A%20%20%20%20%20%20%20%20result%20%3D%20logic_output(a%2C%20b%2C%20op)%0A%0A%20%20%20%20%20%20%20%20fig%2C%20ax%20%3D%20plt.subplots(figsize%3D(6%2C%203))%0A%20%20%20%20%20%20%20%20ax.axis(%22off%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Draw%20switches%0A%20%20%20%20%20%20%20%20def%20draw_switch(x%2C%20y%2C%20state%2C%20label)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.text(x%20-%200.1%2C%20y%20%2B%200.15%2C%20label%2C%20fontsize%3D12%2C%20ha%3D'right')%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.plot(%5Bx%2C%20x%20%2B%200.3%5D%2C%20%5By%2C%20y%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20state%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ax.plot(%5Bx%20%2B%200.3%2C%20x%20%2B%200.6%5D%2C%20%5By%2C%20y%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ax.plot(%5Bx%20%2B%200.3%2C%20x%20%2B%200.6%5D%2C%20%5By%20%2B%200.15%2C%20y%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%0A%20%20%20%20%20%20%20%20draw_switch(0.1%2C%200.7%2C%20a%2C%20%22A%22)%0A%20%20%20%20%20%20%20%20draw_switch(0.1%2C%200.3%2C%20b%2C%20%22B%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Wires%20to%20gate%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.7%2C%201.0%5D%2C%20%5B0.7%2C%200.7%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.7%2C%201.0%5D%2C%20%5B0.3%2C%200.3%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%0A%20%20%20%20%20%20%20%20%23%20Gate%20box%0A%20%20%20%20%20%20%20%20gate_box%20%3D%20patches.FancyBboxPatch(%0A%20%20%20%20%20%20%20%20%20%20%20%20(1.0%2C%200.25)%2C%200.5%2C%200.6%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20boxstyle%3D%22round%2Cpad%3D0.05%22%2C%20fc%3D%22lightgray%22%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20ax.add_patch(gate_box)%0A%20%20%20%20%20%20%20%20ax.text(1.25%2C%200.55%2C%20op%2C%20fontsize%3D14%2C%20ha%3D%22center%22%2C%20va%3D%22center%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Output%20wire%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.5%2C%202.0%5D%2C%20%5B0.55%2C%200.55%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%0A%20%20%20%20%20%20%20%20%23%20Light%20bulb%0A%20%20%20%20%20%20%20%20bulb_color%20%3D%20%22gold%22%20if%20result%20else%20%22lightgray%22%0A%20%20%20%20%20%20%20%20bulb%20%3D%20patches.Circle((2.2%2C%200.55)%2C%200.15%2C%20fc%3Dbulb_color%2C%20ec%3D%22black%22%2C%20lw%3D1.5)%0A%20%20%20%20%20%20%20%20ax.add_patch(bulb)%0A%20%20%20%20%20%20%20%20ax.text(2.2%2C%200.85%2C%20%22Output%22%2C%20ha%3D%22center%22%2C%20fontsize%3D10)%0A%20%20%20%20%20%20%20%20ax.set_xlim(0%2C%202.5)%0A%20%20%20%20%20%20%20%20ax.set_ylim(0%2C%201)%0A%0A%20%20%20%20%20%20%20%20plt.close(fig)%0A%20%20%20%20%20%20%20%20return%20fig%0A%0A%20%20%20%20%23%20---%20Layout%20---%0A%20%20%20%20mo.vstack(%5B%0A%20%20%20%20%20%20%20%20mo.hstack(%5BA%2C%20B%2C%20operation%5D)%2C%0A%20%20%20%20%20%20%20%20logic_diagram()%0A%20%20%20%20%5D)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20NOT%0A%20%20%20%20In%20the%20discussion%20above%20one%20very%20important%2C%20and%20somewhat%20counterintuitive%2C%20operator%20is%20missing.%20The%20NOT%3A%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%0A%0A%20%20%20%20switch%20%3D%20mo.ui.checkbox(label%3D%22Switch%20(checked%20%3D%201%2C%20unchecked%20%3D%200)%22%2C%20value%3DFalse)%0A%0A%20%20%20%20def%20not_output(x%3A%20bool)%20-%3E%20bool%3A%0A%20%20%20%20%20%20%20%20return%20(not%20x)%0A%0A%20%20%20%20def%20status()%3A%0A%20%20%20%20%20%20%20%20x%20%3D%20switch.value%0A%20%20%20%20%20%20%20%20y%20%3D%20not_output(x)%0A%20%20%20%20%20%20%20%20symbol%20%3D%20%22%F0%9F%92%A1%22%20if%20y%20else%20%22%E2%9A%AB%22%0A%20%20%20%20%20%20%20%20return%20mo.md(f%22%23%23%23%20Output%3A%20%7Bsymbol%7D%20%E2%86%92%20%60%7Bint(y)%7D%60%20%20(input%20%60%7Bint(x)%7D%60)%22)%0A%20%20%20%20return%20not_output%2C%20switch%0A%0A%0A%40app.cell%0Adef%20_(not_output%2C%20patches%2C%20plt%2C%20switch)%3A%0A%20%20%20%20def%20inverter_diagram()%3A%0A%20%20%20%20%20%20%20%20x%20%3D%20switch.value%0A%20%20%20%20%20%20%20%20y%20%3D%20not_output(x)%0A%0A%20%20%20%20%20%20%20%20fig%2C%20ax%20%3D%20plt.subplots(figsize%3D(6%2C%203))%0A%20%20%20%20%20%20%20%20ax.axis(%22off%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Helpers%0A%20%20%20%20%20%20%20%20active_in%20%3D%20%22black%22%20if%20x%20else%20%22lightgray%22%0A%20%20%20%20%20%20%20%20active_out%20%3D%20%22gold%22%20if%20y%20else%20%22lightgray%22%0A%0A%20%20%20%20%20%20%20%20%23%20Draw%20a%20simple%20switch%20symbol%20(left)%0A%20%20%20%20%20%20%20%20def%20draw_switch(x0%2C%20y0%2C%20state%2C%20label)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.text(x0%20-%200.1%2C%20y0%20%2B%200.15%2C%20label%2C%20fontsize%3D12%2C%20ha%3D%22right%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20base%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.plot(%5Bx0%2C%20x0%20%2B%200.3%5D%2C%20%5By0%2C%20y0%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20blade%20(closed%20if%20state%3DTrue)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20state%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ax.plot(%5Bx0%20%2B%200.3%2C%20x0%20%2B%200.6%5D%2C%20%5By0%2C%20y0%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ax.plot(%5Bx0%20%2B%200.3%2C%20x0%20%2B%200.6%5D%2C%20%5By0%20%2B%200.15%2C%20y0%5D%2C%20color%3D%22black%22%2C%20lw%3D2)%0A%0A%20%20%20%20%20%20%20%20draw_switch(0.1%2C%200.55%2C%20x%2C%20%22Input%22)%0A%0A%20%20%20%20%20%20%20%20%23%20Input%20wire%20to%20inverter%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.7%2C%201.0%5D%2C%20%5B0.55%2C%200.55%5D%2C%20color%3Dactive_in%2C%20lw%3D3)%0A%0A%20%20%20%20%20%20%20%20%23%20Inverter%20symbol%20(triangle%20%2B%20bubble)%0A%20%20%20%20%20%20%20%20tri%20%3D%20patches.Polygon(%5B%5B1.0%2C%200.25%5D%2C%20%5B1.0%2C%200.85%5D%2C%20%5B1.45%2C%200.55%5D%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20closed%3DTrue%2C%20fc%3D%22lightgray%22%2C%20ec%3D%22black%22%2C%20lw%3D1.5)%0A%20%20%20%20%20%20%20%20ax.add_patch(tri)%0A%20%20%20%20%20%20%20%20bubble%20%3D%20patches.Circle((1.55%2C%200.55)%2C%200.05%2C%20fc%3D%22white%22%2C%20ec%3D%22black%22%2C%20lw%3D1.5)%0A%20%20%20%20%20%20%20%20ax.add_patch(bubble)%0A%20%20%20%20%20%20%20%20ax.text(1.225%2C%200.55%2C%20%22NOT%22%2C%20ha%3D%22center%22%2C%20va%3D%22center%22%2C%20fontsize%3D11)%0A%0A%20%20%20%20%20%20%20%20%23%20Output%20wire%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.60%2C%202.00%5D%2C%20%5B0.55%2C%200.55%5D%2C%20color%3Dactive_out%2C%20lw%3D3)%0A%0A%20%20%20%20%20%20%20%20%23%20Light%20bulb%20(with%20soft%20glow%20when%20on)%0A%20%20%20%20%20%20%20%20bulb_center%20%3D%20(2.20%2C%200.55)%0A%20%20%20%20%20%20%20%20bulb%20%3D%20patches.Circle(bulb_center%2C%200.15%2C%20fc%3D(%22gold%22%20if%20y%20else%20%22lightgray%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ec%3D%22black%22%2C%20lw%3D1.5)%0A%20%20%20%20%20%20%20%20ax.add_patch(bulb)%0A%20%20%20%20%20%20%20%20if%20y%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20glow%20%3D%20patches.Circle(bulb_center%2C%200.28%2C%20fc%3D%22gold%22%2C%20alpha%3D0.25%2C%20ec%3DNone)%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.add_patch(glow)%0A%20%20%20%20%20%20%20%20ax.text(2.20%2C%200.85%2C%20%22Output%22%2C%20ha%3D%22center%22%2C%20fontsize%3D10)%0A%0A%20%20%20%20%20%20%20%20%23%20Bounds%0A%20%20%20%20%20%20%20%20ax.set_xlim(0.0%2C%202.6)%0A%20%20%20%20%20%20%20%20ax.set_ylim(0.0%2C%201.1)%0A%0A%20%20%20%20%20%20%20%20plt.close(fig)%0A%20%20%20%20%20%20%20%20return%20fig%0A%0A%20%20%20%20return%20(inverter_diagram%2C)%0A%0A%0A%40app.cell%0Adef%20_(inverter_diagram%2C%20mo%2C%20switch)%3A%0A%20%20%20%20mo.vstack(%5B%0A%20%20%20%20%20%20%20%20switch%2C%0A%20%20%20%20%20%20%20%20inverter_diagram()%0A%20%20%20%20%5D)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20NOT%20operator%20inverts%20the%20signal%2C%20given%20a%200%20it%20gives%20a%201%2C%20and%20given%20a%201%20it%20gives%200%20as%20output.%20The%20truthtable%20is%20as%20follows%3A%0A%0A%20%20%20%20%7C%20Input%20bit%20%7C%20output%20bit%20%7C%0A%20%20%20%20%7C---%7C---%7C%0A%20%20%20%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%200%20%7C%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20operators%20above%20are%20so%20useful%20beccause%20you%20can%20build%20any%20*boolean%20operator*.%20That%20means%20that%20for%20any%20number%20of%20bits%2C%20we%20can%20get%20any%20binary%20outcome%20by%20combining%20these%20operators.%0A%20%20%20%20In%20fact%2C%20AND%20and%20NOT%20are%20already%20enough.%20The%20OR%20and%20XOR%20operators%20we%20can%20make%20out%20of%20AND%20and%20NOT%3A%0A%0A%20%20%20%20A%20OR%20B%20%3D%20NOT%20((NOT%20A)%20AND%20(NOT%20B))%0A%0A%20%20%20%20and%0A%0A%20%20%20%20A%20XOR%20B%20%3D%20(NOT%20(A%20AND%20B))%20AND%20(NOT%20((NOT%20A)%20AND%20(NOT%20B)))%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20One%20way%20to%20check%20that%20this%20works%20is%20by%20working%20out%20the%20truth%20table%2C%20the%20first%20columns%20are%20the%20inidvidual%20input%20bits.%20In%20this%20case%20A%20and%20B.%20Then%20we%20compute%20the%20inbetween%20%20steps%2C%20such%20as%20NOT%20A%20and%20NOT%20B.%20In%20the%20last%20column%20we%20get%20the%20full%20expression%2C%20which%2C%20in%20this%20case%20is%20exactly%20the%20same%20column%20we%20also%20had%20for%20the%20OR%20operator.%0A%0A%20%20%20%20%7C%20A%20%7C%20B%20%7C%20NOT%20A%20%7C%20NOT%20B%20%7C%20(NOT%20A)%20AND%20(NOT%20B)%20%7C%20%20%20NOT%20((NOT%20A)%20AND%20(NOT%20B))%0A%20%20%20%20%7C---%7C---%7C---%7C---%7C---%7C---%7C%0A%20%20%20%20%7C%200%20%7C%200%20%7C%201%20%7C%201%20%7C%201%20%7C%200%20%7C%0A%20%20%20%20%7C%200%20%7C%201%20%7C%201%20%7C%200%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%200%20%7C%200%20%7C%201%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%201%20%7C%200%20%7C%200%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20For%20more%20reading%3A%0A%0A%20%20%20%20-%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FBoolean_function%0A%0A%20%20%20%20-%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FFunctional_completeness%0A%0A%20%20%20%20For%20this%20text%2C%20let's%20have%20a%20quick%20look%20at%20why%20it%20makes%20sense%20that%20these%20operations%20are%20useful.%20Let%20try%20to%20build%20addition%20(for%20small%20numbers)%2C%20you%20can%20click%20on%20the%20four%20buttons%20with%200's%20to%20change%20them%20to%201's%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20get_A0%2C%20set_A0%20%3D%20mo.state(True)%0A%20%20%20%20get_A1%2C%20set_A1%20%3D%20mo.state(True)%0A%20%20%20%20get_B0%2C%20set_B0%20%3D%20mo.state(True)%0A%20%20%20%20get_B1%2C%20set_B1%20%3D%20mo.state(True)%0A%20%20%20%20return%20get_A0%2C%20get_A1%2C%20get_B0%2C%20get_B1%2C%20set_A0%2C%20set_A1%2C%20set_B0%2C%20set_B1%0A%0A%0A%40app.cell%0Adef%20_(get_A0%2C%20get_A1%2C%20get_B0%2C%20get_B1%2C%20set_A0%2C%20set_A1%2C%20set_B0%2C%20set_B1)%3A%0A%20%20%20%20def%20update_A0(v)%3A%0A%20%20%20%20%20%20%20%20set_A0(not%20get_A0())%0A%0A%20%20%20%20def%20update_A1(v)%3A%0A%20%20%20%20%20%20%20%20set_A1(not%20get_A1())%0A%0A%20%20%20%20def%20update_B0(v)%3A%0A%20%20%20%20%20%20%20%20set_B0(not%20get_B0())%0A%0A%20%20%20%20def%20update_B1(v)%3A%0A%20%20%20%20%20%20%20%20set_B1(not%20get_B1())%0A%20%20%20%20return%20update_A0%2C%20update_A1%2C%20update_B0%2C%20update_B1%0A%0A%0A%40app.cell%0Adef%20_(%0A%20%20%20%20get_A0%2C%0A%20%20%20%20get_A1%2C%0A%20%20%20%20get_B0%2C%0A%20%20%20%20get_B1%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20update_A0%2C%0A%20%20%20%20update_A1%2C%0A%20%20%20%20update_B0%2C%0A%20%20%20%20update_B1%2C%0A)%3A%0A%20%20%20%20bit_A0%20%3D%20mo.ui.button(value%20%3D%20get_A0()%2C%20on_change%3Dupdate_A0%2C%20label%3Df%22%7Bint(get_A0())%7D%22)%0A%20%20%20%20bit_A1%20%3D%20mo.ui.button(value%20%3D%20get_A1()%2C%20on_change%3Dupdate_A1%2C%20label%3Df%22%7Bint(get_A1())%7D%22)%0A%20%20%20%20bit_B0%20%3D%20mo.ui.button(value%20%3D%20get_B0()%2C%20on_change%3Dupdate_B0%2C%20label%3Df%22%7Bint(get_B0())%7D%22)%0A%20%20%20%20bit_B1%20%3D%20mo.ui.button(value%20%3D%20get_B1()%2C%20on_change%3Dupdate_B1%2C%20label%3Df%22%7Bint(get_B1())%7D%22)%0A%20%20%20%20return%20bit_A0%2C%20bit_A1%2C%20bit_B0%2C%20bit_B1%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20def%20binary_to_int(*binary)%3A%0A%20%20%20%20%20%20%20%20total%20%3D%200%0A%20%20%20%20%20%20%20%20for%20i%2C%20b%20in%20enumerate(reversed(binary))%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20b%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20total%20%2B%3D%202**i%0A%20%20%20%20%20%20%20%20return%20total%0A%0A%20%20%20%20def%20XOR(a%2Cb)%3A%20return%20a%20%5E%20b%0A%20%20%20%20def%20AND(a%2Cb)%3A%20return%20a%20%26%20b%0A%20%20%20%20def%20OR(a%2Cb)%3A%20%20return%20a%20%7C%20b%0A%20%20%20%20return%20AND%2C%20OR%2C%20XOR%2C%20binary_to_int%0A%0A%0A%40app.cell%0Adef%20_(%0A%20%20%20%20AND%2C%0A%20%20%20%20OR%2C%0A%20%20%20%20XOR%2C%0A%20%20%20%20binary_to_int%2C%0A%20%20%20%20bit_A0%2C%0A%20%20%20%20bit_A1%2C%0A%20%20%20%20bit_B0%2C%0A%20%20%20%20bit_B1%2C%0A%20%20%20%20get_A0%2C%0A%20%20%20%20get_A1%2C%0A%20%20%20%20get_B0%2C%0A%20%20%20%20get_B1%2C%0A%20%20%20%20mo%2C%0A%20%20%20%20patches%2C%0A%20%20%20%20plt%2C%0A)%3A%0A%20%20%20%20def%20adder_diagram()%3A%0A%20%20%20%20%20%20%20%20%23%20Calculations%0A%20%20%20%20%20%20%20%20a1%2Ca0%2Cb1%2Cb0%20%3D%20get_A1()%2C%20get_A0()%2C%20get_B1()%2C%20get_B0()%0A%20%20%20%20%20%20%20%20s0%20%3D%20XOR(a0%2Cb0)%0A%20%20%20%20%20%20%20%20c0%20%3D%20AND(a0%2Cb0)%0A%20%20%20%20%20%20%20%20xor1%20%3D%20XOR(a1%2Cb1)%0A%20%20%20%20%20%20%20%20s1%20%3D%20XOR(xor1%2Cc0)%0A%20%20%20%20%20%20%20%20c1%20%3D%20OR(AND(a1%2Cb1)%2C%20AND(c0%2Cxor1))%0A%20%20%20%20%20%20%20%20%23%20Draw%0A%20%20%20%20%20%20%20%20fig%2C%20ax%20%3D%20plt.subplots(figsize%3D(8%2C6))%0A%20%20%20%20%20%20%20%20ax.axis(%22off%22)%0A%0A%20%20%20%20%20%20%20%20def%20gate(x%2Cy%2Clabel%2Ccolor%3D%22lightgray%22)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20box%20%3D%20patches.FancyBboxPatch((x-0.3%2Cy-0.2)%2C0.6%2C0.4%2Cboxstyle%3D%22round%2Cpad%3D0.05%22%2Cfc%3Dcolor%2Cec%3D%22black%22%2Clw%3D1.5)%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.add_patch(box)%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.text(x%2Cy%2Clabel%2Cha%3D%22center%22%2Cva%3D%22center%22%2Cfontsize%3D10)%0A%0A%20%20%20%20%20%20%20%20def%20bulb(x%2Cy%2Cstate)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20col%3D%22gold%22%20if%20state%20else%20%22lightgray%22%0A%20%20%20%20%20%20%20%20%20%20%20%20c%3Dpatches.Circle((x%2Cy)%2C0.15%2Cfc%3Dcol%2Cec%3D%22black%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ax.add_patch(c)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20state%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ax.add_patch(patches.Circle((x%2Cy)%2C0.25%2Cfc%3D%22gold%22%2Calpha%3D0.25))%0A%0A%20%20%20%20%20%20%20%20%23%20Output%20bit%201%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C2.2%2C%22A%E2%82%80%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20a0%20else%20%22black%22)%20%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C1.8%2C%22B%E2%82%80%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20b0%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B2.2%2C2.2%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B1.8%2C1.8%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.36%2C%204.13%5D%2C%5B2%2C%202%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20gate(1.0%2C2.0%2C%22XOR%22%2C%22lightgreen%22%20if%20s0%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20bulb(4.3%2C2.0%2Cs0)%3B%20ax.text(4.32%2C2.2%2C%22O0%22%2Cha%3D%22center%22)%0A%0A%20%20%20%20%20%20%20%20%23%20output%20bit%202%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C1.3%2C%22A%E2%82%80%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20a0%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C0.9%2C%22B%E2%82%80%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20b0%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C0.5%2C%22A%E2%82%81%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20a1%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C0.1%2C%22B%E2%82%81%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20b1%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20gate(1.0%2C1.1%2C%22AND%22%2C%22lightgreen%22%20if%20c0%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B1.3%2C%201.3%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B0.9%2C%200.9%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20gate(1.0%2C0.3%2C%22XOR%22%2C%22lightgreen%22%20if%20xor1%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B0.5%2C%200.5%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B0.1%2C%200.1%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20gate(2.0%2C%200.7%2C%22XOR%22%2C%22lightgreen%22%20if%20s1%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.36%2C1.64%5D%2C%5B0.9%2C%200.9%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.36%2C1.64%5D%2C%5B0.5%2C%200.5%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B2.36%2C4.13%5D%2C%5B0.7%2C%200.7%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20bulb(4.3%2C0.7%2Cs1)%3B%20ax.text(4.32%2C%200.9%2C%22O1%22%2Cha%3D%22center%22)%0A%0A%20%20%20%20%20%20%20%20%23%20output%20bit%203%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C-0.4%2C%22A%E2%82%80%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20a0%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C-0.8%2C%22B%E2%82%80%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20b0%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C-1.2%2C%22A%E2%82%81%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20a1%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C-1.6%2C%22B%E2%82%81%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20b1%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C-2.0%2C%22A%E2%82%81%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20a1%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20ax.text(0.2%2C-2.4%2C%22B%E2%82%81%22%2Cha%3D%22center%22%2C%20color%3D%22lightgreen%22%20if%20b1%20else%20%22black%22)%0A%20%20%20%20%20%20%20%20gate(1.0%2C-0.6%2C%22AND%22%2C%22lightgreen%22%20if%20c0%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B-0.4%2C%20-0.4%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B-0.8%2C%20-0.8%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20gate(1.0%2C-1.4%2C%22XOR%22%2C%22lightgreen%22%20if%20xor1%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B-1.2%2C%20-1.2%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.3%2C0.64%5D%2C%5B-1.6%2C%20-1.6%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20gate(2.0%2C%20-1%2C%22AND%22%2C%22lightgreen%22%20if%20AND(c0%2Cxor1)%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.36%2C1.64%5D%2C%5B-0.8%2C%20-0.8%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.36%2C1.64%5D%2C%5B-1.2%2C%20-1.2%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B2.36%2C2.64%5D%2C%5B-1.0%2C%20-1.0%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20gate(1.0%2C%20-2.2%2C%22AND%22%2C%22lightgreen%22%20if%20AND(a1%2Cb1)%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.36%2C0.64%5D%2C%5B-2.0%2C%20-2.0%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B0.36%2C0.64%5D%2C%5B-2.4%2C%20-2.4%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B1.36%2C2.64%5D%2C%5B-2.2%2C%20-2.2%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20gate(3.0%2C%20-1.6%2C%22OR%22%2C%22lightgreen%22%20if%20c1%20else%20%22lightgray%22)%0A%20%20%20%20%20%20%20%20ax.plot(%5B2.64%2C2.64%5D%2C%5B-1.0%2C%20-1.4%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B2.64%2C2.64%5D%2C%5B-2.2%2C%20-1.8%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20ax.plot(%5B3.36%2C4.13%5D%2C%5B-1.6%2C%20-1.6%5D%2Ccolor%3D%22black%22%2Clw%3D2)%0A%20%20%20%20%20%20%20%20bulb(4.3%2C-1.6%2C%20c1)%3B%20ax.text(4.32%2C%20-1.4%2C%22O2%22%2Cha%3D%22center%22)%0A%0A%20%20%20%20%20%20%20%20ax.set_xlim(0%2C4.6)%3B%20ax.set_ylim(-2.5%2C2.6)%0A%20%20%20%20%20%20%20%20plt.close(fig)%0A%20%20%20%20%20%20%20%20return%20fig%0A%0A%20%20%20%20a1%2Ca0%2Cb1%2Cb0%20%3D%20get_A1()%2C%20get_A0()%2C%20get_B1()%2C%20get_B0()%0A%20%20%20%20s0%20%3D%20XOR(a0%2Cb0)%0A%20%20%20%20c0%20%3D%20AND(a0%2Cb0)%0A%20%20%20%20xor1%20%3D%20XOR(a1%2Cb1)%0A%20%20%20%20s1%20%3D%20XOR(xor1%2Cc0)%0A%20%20%20%20c1%20%3D%20OR(AND(a1%2Cb1)%2C%20AND(c0%2Cxor1))%0A%0A%20%20%20%20mo.vstack(%5B%0A%20%20%20%20%20%20%20%20mo.hstack((bit_A1%2C%20bit_A0%2C%20%22%2B%22%2C%20bit_B1%2C%20bit_B0%2C%20%22%3D%22%2C%20int(c1)%2C%20int(s1)%2C%20int(s0)%2C%20mo.md(f%22corresponding%20to%20%7Bbinary_to_int(a1%2C%20a0)%7D%2B%7Bbinary_to_int(b1%2C%20b0)%7D%20%3D%20%7Bbinary_to_int(c1%2C%20s1%2C%20s0)%7D%22))%2C%20justify%3D%22start%22)%2C%20%0A%20%20%20%20%20%20%20%20mo.md(%22order%3A%20A1%20A0%20%2B%20B1%20B0%20%3D%20O2%20O1%20O0%22)%2C%0A%20%20%20%20%20%20%20%20adder_diagram()%0A%20%20%20%20%5D)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20Note%20that%20already%20in%20such%20a%20simple%20diagram%20many%20things%20are%20repeated%2C%20so%20this%20is%20by%20no%20means%20the%20simplest%20(in%20the%20sense%20of%20number%20of%20operations)%20way%20to%20construct%20addition.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%23%20Summary%20and%20next%20steps%3A%0A%20%20%20%20Chips%20work%20with%20a%20language%20consisting%20of%20bits.%20Anything%20a%20chip%20should%20do%20to%20such%20a%20collection%20of%20bits%20can%20be%20constructed%20from%20simple%20operations%20such%20as%20AND%20and%20NOT.%20What%20is%20missing%20is%20how%20these%20abstract%20ideas%20can%20be%20created%20in%20the%20real%20world%20on%20a%20piece%20of%20silicon!%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Transistors%0A%20%20%20%20The%20production%20of%20semiconductor%20chips%20generally%20splits%20into%20two%20broad%20categories%3A%20memory%20and%20logic.%0A%0A%20%20%20%20Memory%20chips%20are%20designed%20to%20store%20information%20by%20holding%20electric%20charges%20in%20tiny%20structures%20called%20memory%20cells.%20Each%20cell%20represents%20a%20bit%20%E2%80%94%20it%20can%20be%20charged%20(%E2%80%9C1%E2%80%9D)%20or%20uncharged%20(%E2%80%9C0%E2%80%9D).%20This%20principle%20underlies%20technologies%20such%20as%20DRAM%20(used%20as%20working%20memory%20in%20laptops%20and%20computers)%20and%20NAND%20flash%20(used%20in%20SSDs).%0A%0A%20%20%20%20Logic%20chips%2C%20on%20the%20other%20hand%2C%20are%20designed%20to%20process%20information.%20They%20perform%20calculations%20and%20decision-making%20using%20vast%20networks%20of%20transistors%20arranged%20to%20carry%20out%20logical%20operations%20%E2%80%94%20we%E2%80%99ll%20explore%20how%20those%20transistors%20work%20next.%0A%0A%20%20%20%20%F0%9F%92%A1%20Fun%20fact%3A%20The%20fastest%20memory%20in%20a%20computer%20%E2%80%94%20the%20cache%20located%20inside%20logic%20chips%20like%20CPUs%20%E2%80%94%20is%20also%20made%20entirely%20of%20transistors.%20It%E2%80%99s%20called%20SRAM%20(static%20RAM)%20and%20can%20access%20data%20much%20faster%20than%20external%20memory%20types.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20logical%20operations%20AND%2C%20OR%2C%20and%20NOT%20are%20a%20great%20way%20to%20think%20about%20how%20logic%20works%20in%20principle.%0A%20%20%20%20On%20an%20actual%20chip%2C%20these%20operations%20are%20realized%20using%20physical%20components%20called%20transistors.%0A%0A%20%20%20%20A%20transistor%20is%20a%20tiny%20electronic%20device%20with%20three%20terminals.%20Two%20of%20them%20form%20a%20path%20for%20electric%20current%2C%20but%20by%20default%20that%20path%20is%20blocked.%20The%20third%20terminal%2C%20called%20the%20gate%2C%20controls%20whether%20current%20can%20flow.%0A%0A%20%20%20%20When%20a%20voltage%20is%20applied%20to%20the%20gate%2C%20it%20creates%20an%20electric%20field%20that%20allows%20current%20to%20pass%20between%20the%20other%20two%20terminals%20%E2%80%94%20called%20the%20source%20and%20the%20drain.%20In%20effect%2C%20the%20transistor%20acts%20like%20a%20voltage-controlled%20switch%3A%20with%20no%20voltage%20on%20the%20gate%2C%20the%20switch%20is%20off%3B%20with%20sufficient%20voltage%2C%20it%20turns%20on.%0A%0A%20%20%20%20In%20a%20transistor%2C%20the%20gate%20voltage%20carries%20the%20logical%20signal.%20The%20source%20serves%20as%20the%20reference%20for%20that%20signal%2C%20and%20the%20drain%20acts%20as%20the%20output%20whose%20voltage%20depends%20on%20whether%20the%20transistor%20conducts.%20Therefore%20the%20transistor%20itself%20is%20not%20an%20AND%20operator%20-%20as%20the%20source%20is%20not%20a%20logical%20input.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20There%20are%20multiple%20ways%20to%20depict%20transistors%20in%20circuit%20diagrams%2C%20below%20you%20find%20one%20such%20a%20depiction%20for%20the%20(NMOS)%20transistor%20we%20described%20above%3A%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.image(r%22C%3A%5CUsers%5Csteve%5CDocuments%5Cpython%5Cbasic_litho_sim%5Ccontent%5Cfigures%5Cnpn_transistor.png%22)%0A%20%20%20%20return%0A%0A%0Aapp._unparsable_cell(%0A%20%20%20%20r%22%22%22%0A%20%20%20%20Another%20type%20of%20transistor%2C%20called%20a%20PMOS%2C%20conducts%20when%20the%20voltage%20on%20its%20gate%20is%20low.%20In%20this%20device%2C%20the%20source%20is%20typically%20connected%20to%20the%20higher%20supply%20voltage%2C%20and%20current%20flows%20from%20source%20to%20drain%20when%20the%20transistor%20is%20on.%20The%20drain%20then%20serves%20as%20the%20output%2C%20and%20the%20gate%20voltage%20controls%20whether%20that%20path%20is%20open%20or%20closed.%0A%20%20%20%20%22%22%22%2C%0A%20%20%20%20name%3D%22_%22%0A)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.image(r%22C%3A%5CUsers%5Csteve%5CDocuments%5Cpython%5Cbasic_litho_sim%5Ccontent%5Cfigures%5Cpnp_transistor.png%22)%0A%20%20%20%20return%0A%0A%0Aapp._unparsable_cell(%0A%20%20%20%20r%22%22%22%0A%20%20%20%20Combining%20these%20two%20transistors%20in%20a%20the%20cingle%20circuit%20below%20we%20get%20the%20inverter%3A%0A%20%20%20%20%22%22%22%2C%0A%20%20%20%20name%3D%22_%22%0A)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.image(r%22C%3A%5CUsers%5Csteve%5CDocuments%5Cpython%5Cbasic_litho_sim%5Ccontent%5Cfigures%5CCMOS_Inverter.svg%22%2Ccaption%3D%22CMOS%20inverter%20source%3A%20https%3A%2F%2Fcommons.wikimedia.org%2Fwiki%2FFile%3ACMOS_Inverter.svg%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20This%20circuit%20is%20a%20CMOS%20inverter%2C%20made%20from%20one%20PMOS%20and%20one%20NMOS%20transistor%2C%20both%20controlled%20by%20the%20same%20input%20voltage%20A.%0A%0A%20%20%20%20When%20A%20is%20high%20(1)%2C%20the%20NMOS%20transistor%20turns%20on%2C%20connecting%20the%20output%20Q%20to%20Vss%20(ground%2C%200).%20The%20PMOS%20transistor%20remains%20off%2C%20so%20it%20has%20no%20effect.%20The%20result%20is%20Q%20%3D%200.%0A%0A%20%20%20%20When%20A%20is%20low%20(0)%2C%20the%20situation%20reverses%3A%20the%20PMOS%20transistor%20turns%20on%2C%20connecting%20Q%20to%20Vdd%20(the%20supply%20voltage%2C%201)%2C%20while%20the%20NMOS%20remains%20off.%20Thus%20A%20%3D%200%20produces%20Q%20%3D%201%20%E2%80%94%20the%20output%20is%20the%20logical%20inverse%20of%20the%20input.%0A%0A%20%20%20%20Notice%20that%20at%20any%20time%2C%20only%20one%20transistor%20conducts.%20This%20means%20there%20is%20no%20direct%20current%20path%20between%20Vdd%20and%20Vss%20when%20the%20circuit%20is%20stable%2C%20minimizing%20power%20consumption%20%E2%80%94%20a%20key%20advantage%20of%20CMOS%20(C%20for%20Combined)%20logic.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20NAND%0A%20%20%20%20There%20is%20one%20final%20basic%20logical%20operator%20we%20should%20mention%3A%20The%20NAND%20%3D%20NOT%20AND.%20The%20diagram%20matches%20its%20name%3A%0A%0A%20%20%20%20%7C%20A%20%7C%20B%20%7C%20O%20%7C%0A%20%20%20%20%7C---%7C---%7C---%7C%0A%20%20%20%20%7C%200%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%200%20%7C%201%20%7C%0A%20%20%20%20%7C%200%20%7C%201%20%7C%201%20%7C%0A%20%20%20%20%7C%201%20%7C%201%20%7C%200%20%7C%0A%0A%20%20%20%20Recall%20that%20AND%20and%20NOT%20together%20can%20generate%20all%20logical%20operations%2C%20but%20you%20need%20both.%20The%20NAND%20can%20do%20this%20on%20its%20own.%0A%20%20%20%20NOT%20A%20%3D%20NAND(A%2C%20A)%0A%20%20%20%20which%20we%20can%20then%20use%20for%3A%0A%20%20%20%20AND(A%2C%20B)%20%3D%20NOT(NAND(A%2C%20B)).%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0Aapp._unparsable_cell(%0A%20%20%20%20r%22%22%22%0A%20%20%20%20The%20second%20very%20nice%20propery%2C%20we%20can%20implement%20it%20in%20CMOS%20logic%20with%20only%204%20transistors%20(compared%20to%206%20for%20AND)%0A%20%20%20%20%22%22%22%2C%0A%20%20%20%20name%3D%22_%22%0A)%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.image(r%22https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fe%2Fe2%2FCMOS_NAND.svg%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20In%20the%20NAND%20circuit%2C%20we%20now%20see%20four%20transistors%20%E2%80%94%20two%20NMOS%20and%20two%20PMOS.%0A%20%20%20%20The%20two%20NMOS%20transistors%20conduct%20only%20when%20both%20inputs%20A%20and%20B%20are%20high%20(1).%20In%20that%20case%2C%20both%20PMOS%20transistors%20are%20off%2C%20and%20the%20output%20Out%20is%20connected%20to%20Vss%20(0).%0A%0A%20%20%20%20In%20all%20other%20cases%2C%20at%20least%20one%20input%20(A%20or%20B)%20is%20low%20(0).%20This%20turns%20on%20at%20least%20one%20PMOS%20transistor%2C%20connecting%20the%20output%20to%20Vdd%20(1).%20The%20NMOS%20path%20to%20ground%20is%20then%20interrupted%2C%20so%20Vss%20is%20not%20connected%20to%20the%20output.%0A%0A%20%20%20%20The%20resulting%20behavior%20matches%20exactly%20the%20truth%20table%20of%20a%20NAND%20gate%3A%20the%20output%20is%200%20only%20when%20both%20inputs%20are%201.%0A%0A%20%20%20%20So%20we%20see%20that%20all%20the%20logical%20operations%20we%20would%20like%20can%20be%20build%20out%20of%20transistors.%20What%20remains%20is%20how%20we%20can%20make%20a%20chips%20with%20all%20those%20resistors.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Design%20and%20fabrication%0A%20%20%20%20When%20you%20look%20at%20today%E2%80%99s%20leading%20chip%20companies%2C%20names%20like%20NVIDIA%2C%20Intel%2C%20and%20TSMC%20often%20come%20up.%20But%20these%20companies%20don%E2%80%99t%20all%20do%20the%20same%20thing.%0A%0A%20%20%20%20Aside%20from%20the%20types%20of%20chips%20they%20produce%20%E2%80%94%20GPUs%20in%20the%20case%20of%20NVIDIA%20and%20CPUs%20for%20Intel%20%E2%80%94%20the%20key%20difference%20lies%20in%20which%20part%20of%20the%20production%20chain%20they%20handle.%0A%0A%20%20%20%20NVIDIA%20doesn%E2%80%99t%20physically%20manufacture%20its%20chips.%20Instead%2C%20it%20focuses%20on%20chip%20design%2C%20a%20highly%20complex%20process%20that%20can%20involve%20more%20than%20100%20billion%20transistors%20in%20a%20single%20modern%20processor.%20Designing%20such%20chips%20is%20extremely%20challenging%20and%20is%20where%20much%20of%20the%20value%20of%20the%20final%20product%20is%20created.%0A%0A%20%20%20%20The%20manufacturing%20of%20NVIDIA%E2%80%99s%20chips%20is%20carried%20out%20by%20specialized%20companies%20known%20as%20foundries%2C%20such%20as%20TSMC.%20TSMC%20produces%20most%20of%20the%20world%E2%80%99s%20leading-edge%20chips%20and%20has%20unmatched%20expertise%20in%20semiconductor%20fabrication.%20For%20the%20most%20advanced%20process%20technologies%2C%20only%20TSMC%20and%20Samsung%20are%20currently%20capable%20of%20production%20%E2%80%94%20with%20TSMC%20typically%20achieving%20higher%20yields%20and%20lower%20costs.%0A%0A%20%20%20%20This%20division%20between%20chip%20design%20and%20chip%20manufacturing%20is%20known%20as%20the%20fabless%E2%80%93foundry%20model%2C%20and%20it%E2%80%99s%20the%20dominant%20structure%20in%20today%E2%80%99s%20semiconductor%20industry.%20Fabless%20companies%20create%20the%20chip%20designs%2C%20while%20foundries%20handle%20the%20fabrication.%0A%0A%20%20%20%20The%20strength%20of%20this%20split%20lies%20in%20specialization%3A%20both%20design%20and%20manufacturing%20are%20so%20complex%20that%20focusing%20on%20one%20enables%20companies%20to%20excel.%20Intel%2C%20historically%20both%20a%20designer%20and%20manufacturer%20(an%20integrated%20device%20manufacturer%2C%20or%20IDM)%2C%20has%20recently%20fallen%20behind%20TSMC%20and%20Samsung%20in%20process%20technology%20but%20is%20now%20investing%20heavily%20to%20catch%20up%20and%20enter%20the%20foundry%20business.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20The%20economic%20picture%20and%20Moore's%20law.%0A%20%20%20%20As%20we%20saw%20above%2C%20only%20a%20few%20companies%20are%20now%20able%20to%20compete%20at%20the%20very%20high%20end%20of%20chip%20production%20due%20to%20the%20enormous%20complexity%20of%20both%20design%20and%20manufacturing.%0A%0A%20%20%20%20In%20the%20semiconductor%20world%2C%20Moore%E2%80%99s%20law%20is%20a%20famous%20%E2%80%9Claw%E2%80%9D%20that%20states%20that%20the%20number%20of%20transistors%20on%20a%20chip%20roughly%20doubles%20every%20two%20years.%20This%20law%20%E2%80%94%20or%20rather%2C%20an%20empirical%20observation%20%E2%80%94%20was%20first%20made%20by%20Gordon%20Moore%20in%201965%2C%20although%20the%20original%20doubling%20rate%20was%20slightly%20faster.%20The%20main%20way%20to%20sustain%20this%20trend%20has%20been%20to%20shrink%20the%20size%20of%20transistors.%0A%0A%20%20%20%20Continuing%20this%20scaling%20means%20ever-smaller%20transistors%2C%20more%20expensive%20machines%2C%20longer%20and%20more%20intricate%20manufacturing%20steps%2C%20and%20increasingly%20sophisticated%20designs.%20Yet%20it%20has%20been%20worthwhile%20because%20the%20benefits%20go%20well%20beyond%20simply%20increasing%20transistor%20count%3A%0A%0A%20%20%20%201.%20Higher%20performance%3A%20Smaller%20transistors%20can%20switch%20faster%2C%20allowing%20processors%20to%20run%20at%20higher%20clock%20speeds%20and%20perform%20more%20calculations%20per%20second.%0A%20%20%20%202.%20Lower%20power%20consumption%3A%20Shrinking%20transistors%20reduces%20the%20energy%20needed%20for%20each%20switching%20event%2C%20leading%20to%20lower%20heat%20generation%20and%20better%20power%20efficiency.%0A%20%20%20%203.%20Lower%20cost%20per%20transistor%3A%20More%20transistors%20can%20fit%20on%20the%20same%20silicon%20wafer%2C%20reducing%20the%20cost%20per%20transistor.%0A%0A%20%20%20%20These%20improvements%20have%20enabled%20compact%20and%20power-efficient%20devices%20such%20as%20smartphones%2C%20and%20they%20continue%20to%20drive%20advances%20in%20AI%20hardware%2C%20where%20energy%20efficiency%20directly%20affects%20the%20cost%20of%20training%20and%20inference.%0A%0A%20%20%20%20In%20recent%20years%2C%20however%2C%20some%20of%20these%20benefits%20have%20become%20less%20automatic.%20Clock%20speeds%20have%20largely%20stopped%20increasing%20since%20the%20mid-2000s%2C%20and%20cost%20per%20transistor%20is%20no%20longer%20dropping%20as%20consistently%20because%20of%20the%20extreme%20complexity%20of%20modern%20fabrication.%20For%20this%20reason%2C%20many%20in%20the%20industry%20now%20debate%20whether%20Moore%E2%80%99s%20law%20is%20slowing%20%E2%80%94%20or%20even%20ending.%20For%20now%2C%20the%20industry%20technology%20roadmap%20forecast%20a%20continuation%20of%20shrinking%20the%20size%20of%20transistors%2C%20in%20part%20by%20using%20new%20transistor%20designs.%20At%20the%20same%20time%20by%20making%20use%20of%20other%20solutions%2C%20such%20as%20smart%20integration%20of%20more%20functionalities%20on%20chips%20under%20the%20name%20%22more%20than%20Moore%22.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%23%20Actual%20transistors%2C%20semiconductors%20and%20Integrated%20Circuits%0A%20%20%20%20We%E2%80%99ve%20seen%20that%20transistors%20are%20the%20fundamental%20building%20blocks%20of%20chips%2C%20and%20that%20by%20combining%20many%20of%20them%2C%20we%20can%20perform%20any%20operation%20we%20like%20on%20binary%20data.%20In%20this%20section%2C%20we%E2%80%99ll%20take%20a%20closer%20look%20at%20what%20a%20physical%20transistor%20actually%20is.%0A%0A%20%20%20%20Chips%20%E2%80%94%20or%20integrated%20circuits%20%E2%80%94%20are%20typically%20built%20on%20thin%20circular%20wafers%20made%20from%20monocrystalline%20silicon.%20Silicon%20is%20especially%20useful%20because%20it%20is%20a%20semiconductor%3A%20it%20conducts%20electricity%20better%20than%20an%20insulator%2C%20but%20not%20as%20freely%20as%20a%20metal%20such%20as%20copper.%0A%0A%20%20%20%20The%20key%20property%20of%20silicon%20is%20that%20its%20electrical%20behavior%20can%20be%20precisely%20tuned%20by%20introducing%20tiny%20amounts%20of%20certain%20other%20elements%20%E2%80%94%20typically%20phosphorus%20or%20boron.%20Pure%20silicon%20does%20not%20conduct%20electricity%20well%20because%20its%20electrons%20are%20tightly%20bound%20to%20atoms%20and%20have%20limited%20mobility.%0A%0A%20%20%20%20Adding%20phosphorus%2C%20which%20has%20one%20more%20electron%20than%20silicon%2C%20introduces%20extra%20electrons%20that%20can%20move%20freely%20%E2%80%94%20creating%20what%E2%80%99s%20known%20as%20n-type%20silicon%20(%E2%80%9Cn%E2%80%9D%20for%20negative).%20Adding%20boron%2C%20which%20has%20one%20fewer%20electron%2C%20creates%20p-type%20silicon%2C%20where%20the%20missing%20electrons%20leave%20behind%20%E2%80%9Choles%E2%80%9D%20that%20act%20as%20positive%20charge%20carriers.%0A%0A%20%20%20%20You%20can%20think%20of%20it%20this%20way%3A%20when%20a%20hole%20is%20filled%20by%20a%20negatively%20charged%20electron%2C%20that%20electron%20leaves%20behind%20an%20empty%20space%20%E2%80%94%20another%20hole%20%E2%80%94%20effectively%20making%20it%20seem%20as%20though%20a%20positively%20charged%20particle%20is%20moving%20in%20the%20opposite%20direction.%0A%0A%20%20%20%20When%20regions%20of%20p-type%20and%20n-type%20silicon%20are%20placed%20next%20to%20each%20other%2C%20something%20interesting%20happens%20at%20their%20boundary.%20Electrons%20from%20the%20n-type%20side%20(where%20they%20are%20plentiful)%20tend%20to%20diffuse%20into%20the%20p-type%20side%2C%20where%20there%20are%20many%20holes.%20Similarly%2C%20holes%20from%20the%20p-type%20side%20move%20into%20the%20n-type%20region.%0A%0A%20%20%20%20As%20these%20charge%20carriers%20cross%20the%20boundary%2C%20they%20recombine%20%E2%80%94%20electrons%20fill%20holes%20%E2%80%94%20leaving%20behind%20fixed%20charged%20atoms%20on%20both%20sides%3A%20negatively%20charged%20acceptor%20ions%20in%20the%20p-type%20region%20and%20positively%20charged%20donor%20ions%20in%20the%20n-type%20region.%20This%20forms%20a%20thin%20area%20around%20the%20junction%20that%20is%20depleted%20of%20mobile%20charge%20carriers%2C%20known%20as%20the%20depletion%20region.%0A%0A%20%20%20%20The%20result%20is%20an%20internal%20electric%20field%20that%20points%20from%20the%20n-type%20side%20to%20the%20p-type%20side.%20This%20field%20acts%20like%20a%20barrier%3A%20it%20prevents%20further%20movement%20of%20electrons%20and%20holes%20across%20the%20junction%20unless%20an%20external%20voltage%20is%20applied.%0A%0A%20%20%20%20If%20we%20apply%20a%20voltage%20that%20makes%20the%20p-side%20positive%20relative%20to%20the%20n-side%20(called%20forward%20bias)%2C%20the%20barrier%20becomes%20smaller%2C%20allowing%20current%20to%20flow%20easily%20%E2%80%94%20this%20is%20how%20a%20diode%20conducts.%20If%20we%20reverse%20the%20voltage%2C%20the%20barrier%20grows%20and%20almost%20no%20current%20flows%20%E2%80%94%20the%20diode%20becomes%20an%20insulator.%0A%0A%20%20%20%20This%20already%20gives%20us%20nontrivial%20behavior%20from%20semiconductors.%20To%20create%20a%20transistor%2C%20we%20build%20on%20this%20principle%20by%20arranging%20n-type%20and%20p-type%20regions%20to%20form%20the%20source%20and%20drain%20of%20the%20device%2C%20separated%20by%20a%20channel%20that%20is%20normally%20non-conductive.%0A%0A%20%20%20%20The%20input%20of%20the%20transistor%20%E2%80%94%20the%20gate%20%E2%80%94%20is%20not%20directly%20connected%20to%20the%20channel.%20Instead%2C%20when%20a%20voltage%20is%20applied%20to%20the%20gate%2C%20it%20creates%20an%20electric%20field%20that%20attracts%20charge%20carriers%20into%20the%20channel%2C%20making%20it%20conductive%20and%20allowing%20current%20to%20flow%20between%20the%20source%20and%20drain.%20In%20other%20words%2C%20the%20transistor%20turns%20on.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A</marimo-code></head>
  <body>
    <div id="root"></div>
  </body>
</html>
